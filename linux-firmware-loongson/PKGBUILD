# Maintainer: zint <zint@tuta.io>
# Contributor: zint <zint@tuta.io>

pkgname=linux-firmware-loongson
pkgver=1.0.2
_pkgver=${pkgver}-lnd25.1~rc1.7
pkgrel=2
pkgdesc="This package contains the binary firmware for loongson graphics chips supported by the gsgpu drivers."
license=()
arch=(loong64)
makedepends=(
	zstd
	)
options=(!debug !strip)
source=("https://pkg.loongnix.cn/loongnix/25/pool/non-free/l/loonggpu-graphics-drivers/firmware-loongson-graphics_${_pkgver}_${arch}.deb")
b2sums=("c10ca294c99218b9763f7961f41034e03c092dc57caefe159599b8808e718aae5b2e00680e890bf806a8cb459077edfd0d8ea42c328ef0b6b850dcbdcf978f26")

prepare(){
	bsdtar -xf "${srcdir}/data."*
}
package(){
	install -Dm644 ${srcdir}/lib/firmware/loonggpu/lg100_cp.bin ${pkgdir}/usr/lib/firmware/loonggpu/lg100_cp.bin

	install -Dm644 ${srcdir}/usr/share/doc/firmware-loongson-graphics/copyright ${pkgdir}/usr/share/doc/firmware-loongson-graphics/copyright
}
